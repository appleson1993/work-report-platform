# å“¡å·¥æ‰“å¡ç³»çµ±

é€™æ˜¯ä¸€å€‹ä½¿ç”¨ PHP å’Œ MySQL é–‹ç™¼çš„å®Œæ•´å“¡å·¥ç®¡ç†ç³»çµ±ï¼Œæ¡ç”¨é»‘è‰²ç³»é…è‰²è¨­è¨ˆï¼ŒåŒ…å«æ‰“å¡ã€ä¼‘æ¯ç®¡ç†ã€è–ªè³‡ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹è‰²

### å“¡å·¥åŠŸèƒ½
- ğŸ” å®‰å…¨ç™»å…¥é©—è­‰
- â° å³æ™‚æ™‚é–“é¡¯ç¤º
- ğŸ“ ä¸Šç­/ä¸‹ç­æ‰“å¡
- â˜• ä¼‘æ¯æ™‚é–“ç®¡ç†ï¼ˆåˆä¼‘ã€èŒ¶æ­‡ç­‰ï¼‰
- ğŸ“Š å€‹äººå‡ºå‹¤çµ±è¨ˆ
- ğŸ“‹ å‡ºå‹¤è¨˜éŒ„æŸ¥è©¢
- ï¿½ å€‹äººè–ªè³‡è¨˜éŒ„æŸ¥çœ‹
- ğŸ“ˆ è–ªè³‡è¶¨å‹¢åœ–è¡¨
- ï¿½ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ”¯æ´æ‰‹æ©Ÿå’Œå¹³æ¿ï¼‰

### ç®¡ç†å“¡åŠŸèƒ½
- ğŸ‘¥ å“¡å·¥ç®¡ç†ï¼ˆæ–°å¢ã€ç·¨è¼¯ã€åˆªé™¤ï¼‰
- ğŸ“ˆ å‡ºå‹¤å ±è¡¨æŸ¥çœ‹
- â˜• ä¼‘æ¯æ™‚é–“å ±è¡¨
- ï¿½ è–ªè³‡ç®¡ç†ç³»çµ±
  - è–ªè³‡é¡åˆ¥è¨­å®š
  - è–ªè³‡è¨˜éŒ„ç®¡ç†
  - ç‹€æ…‹æµç¨‹æ§åˆ¶ï¼ˆå¾…å¯©æ ¸ â†’ å·²æ‰¹å‡† â†’ å·²æ”¯ä»˜ï¼‰
  - æœˆåº¦è–ªè³‡çµ±è¨ˆ
- ğŸ“Š è–ªè³‡å ±è¡¨èˆ‡åˆ†æ
  - å“¡å·¥è–ªè³‡æ’å
  - é¡åˆ¥åˆ†å¸ƒåœ–è¡¨
  - æœˆåº¦è¶¨å‹¢åˆ†æ
  - CSV å ±è¡¨å°å‡º
- ğŸ“¢ å…¬å‘Šç®¡ç†ç³»çµ±
- ğŸ” å¤šæ¢ä»¶ç¯©é¸æœå°‹
- ğŸ¯ å³æ™‚ç›£æ§å‡ºå‹¤ç‹€æ³

### è–ªè³‡ç®¡ç†ç‰¹è‰²
- ğŸ·ï¸ å¤šæ¨£åŒ–è–ªè³‡é¡åˆ¥ï¼ˆåŸºæœ¬è–ªè³‡ã€ç¸¾æ•ˆçé‡‘ã€å°ˆæ¡ˆçé‡‘ç­‰ï¼‰
- ğŸ“‹ å®Œæ•´çš„è–ªè³‡è¨˜éŒ„ç®¡ç†
- ğŸ”„ ç‹€æ…‹å·¥ä½œæµç¨‹ï¼ˆpending â†’ approved â†’ paidï¼‰
- ğŸ“ˆ è¦–è¦ºåŒ–åœ–è¡¨åˆ†æ
- ğŸ’¡ å“¡å·¥æ¿€å‹µæ©Ÿåˆ¶
- ğŸ“Š çµ±è¨ˆå ±è¡¨åŠŸèƒ½

### ç³»çµ±ç‰¹è‰²
- ğŸ¨ é»‘è‰²ç³»ç¾ä»£åŒ–ä»‹é¢
- ğŸš€ å¿«é€ŸéŸ¿æ‡‰çš„ AJAX æ“ä½œ
- ğŸ”’ å®Œæ•´çš„æ¬Šé™æ§åˆ¶
- ğŸ“± ç§»å‹•è¨­å‚™å‹å¥½
- ğŸ›¡ï¸ SQL æ³¨å…¥é˜²è­·
- ğŸ” å¯†ç¢¼åŠ å¯†å­˜å„²
- ğŸ“Š Chart.js åœ–è¡¨æ•´åˆ

## ç³»çµ±éœ€æ±‚

- PHP 7.4 æˆ–æ›´é«˜ç‰ˆæœ¬
- MySQL 5.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- Apache/Nginx ç¶²é ä¼ºæœå™¨
- æ”¯æ´ PDO MySQL æ“´å±•

## å®‰è£æ­¥é©Ÿ

### 1. ä¸Šå‚³æª”æ¡ˆ
å°‡æ‰€æœ‰æª”æ¡ˆä¸Šå‚³åˆ°æ‚¨çš„ç¶²ç«™æ ¹ç›®éŒ„ã€‚

### 2. è³‡æ–™åº«è¨­å®š
ç·¨è¼¯ `config/database.php` æª”æ¡ˆï¼Œä¿®æ”¹è³‡æ–™åº«é€£æ¥è³‡è¨Šï¼š

```php
$db_config = [
    'host' => 'localhost',
    'dbname' => 'staf_db',
    'username' => 'root',
    'password' => 'Cv#w5I6OE%l4x%0D',
    'charset' => 'utf8mb4'
];
```

### 3. åˆå§‹åŒ–è³‡æ–™åº«
åœ¨ç€è¦½å™¨ä¸­è¨ªå•ï¼š`http://your-domain.com/setup/init_db.php`

é€™å°‡è‡ªå‹•å‰µå»ºå¿…è¦çš„è³‡æ–™è¡¨ä¸¦æ’å…¥é è¨­å¸³è™Ÿã€‚

### 4. è–ªè³‡ç³»çµ±åˆå§‹åŒ–
åŸ·è¡Œè–ªè³‡ç®¡ç†ç³»çµ±çš„è³‡æ–™åº«è…³æœ¬ï¼š

```sql
-- å°å…¥è–ªè³‡ç³»çµ±è³‡æ–™è¡¨
source database_salary.sql;
```

æˆ–åœ¨ phpMyAdmin ä¸­åŒ¯å…¥ `database_salary.sql` æª”æ¡ˆã€‚

### 5. é è¨­å¸³è™Ÿ
ç³»çµ±æœƒè‡ªå‹•å‰µå»ºä»¥ä¸‹å¸³è™Ÿï¼š

**ç®¡ç†å“¡å¸³è™Ÿ**
- å“¡å·¥ç·¨è™Ÿï¼š`ADMIN001`
- å¯†ç¢¼ï¼š`admin123`

**æ¸¬è©¦å“¡å·¥å¸³è™Ÿ**
- å“¡å·¥ç·¨è™Ÿï¼š`EMP001`
- å¯†ç¢¼ï¼š`staff123`

## ç›®éŒ„çµæ§‹

```
/
â”œâ”€â”€ admin/                    # ç®¡ç†å“¡å¾Œå°
â”‚   â”œâ”€â”€ dashboard.php        # ç®¡ç†å“¡æ§åˆ¶å°
â”‚   â”œâ”€â”€ attendance_report.php # å‡ºå‹¤å ±è¡¨
â”‚   â”œâ”€â”€ break_report.php     # ä¼‘æ¯å ±è¡¨
â”‚   â”œâ”€â”€ staff_management.php # å“¡å·¥ç®¡ç†
â”‚   â”œâ”€â”€ salary_management.php # è–ªè³‡ç®¡ç†
â”‚   â”œâ”€â”€ salary_reports.php   # è–ªè³‡å ±è¡¨
â”‚   â”œâ”€â”€ announcements.php   # å…¬å‘Šç®¡ç†
â”‚   â”œâ”€â”€ edit_staff.php      # ç·¨è¼¯å“¡å·¥
â”‚   â”œâ”€â”€ delete_staff.php    # åˆªé™¤å“¡å·¥
â”‚   â””â”€â”€ export_attendance.php # å°å‡ºCSV
â”œâ”€â”€ api/                     # API æ¥å£
â”‚   â”œâ”€â”€ clock_in.php        # ä¸Šç­æ‰“å¡API
â”‚   â”œâ”€â”€ clock_out.php       # ä¸‹ç­æ‰“å¡API
â”‚   â”œâ”€â”€ break_start.php     # é–‹å§‹ä¼‘æ¯API
â”‚   â”œâ”€â”€ break_end.php       # çµæŸä¼‘æ¯API
â”‚   â””â”€â”€ mark_announcement_read.php # æ¨™è¨˜å…¬å‘Šå·²è®€
â”œâ”€â”€ assets/                  # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css       # ä¸»è¦æ¨£å¼æª”æ¡ˆ
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ main.js         # JavaScript åŠŸèƒ½
â”œâ”€â”€ auth/                    # èªè­‰ç›¸é—œ
â”‚   â”œâ”€â”€ login_process.php   # ç™»å…¥è™•ç†
â”‚   â””â”€â”€ logout.php          # ç™»å‡ºè™•ç†
â”œâ”€â”€ config/                  # é…ç½®æª”æ¡ˆ
â”‚   â””â”€â”€ database.php        # è³‡æ–™åº«é…ç½®
â”œâ”€â”€ includes/                # å…±ç”¨æª”æ¡ˆ
â”‚   â”œâ”€â”€ functions.php       # å…±ç”¨å‡½æ•¸
â”‚   â””â”€â”€ responsive_nav.js   # éŸ¿æ‡‰å¼å°èˆª
â”œâ”€â”€ setup/                   # å®‰è£æª”æ¡ˆ
â”‚   â””â”€â”€ init_db.php         # è³‡æ–™åº«åˆå§‹åŒ–
â”œâ”€â”€ staff/                   # å“¡å·¥åŠŸèƒ½
â”‚   â”œâ”€â”€ dashboard.php       # å“¡å·¥æ§åˆ¶å°
â”‚   â”œâ”€â”€ attendance_history.php # å‡ºå‹¤è¨˜éŒ„
â”‚   â””â”€â”€ salary_view.php     # è–ªè³‡æŸ¥çœ‹
â”œâ”€â”€ database_salary.sql     # è–ªè³‡ç³»çµ±è³‡æ–™åº«è…³æœ¬
â””â”€â”€ index.php               # ç™»å…¥é é¢
```

## è³‡æ–™åº«çµæ§‹

### åŸºæœ¬è³‡æ–™è¡¨

#### staff è¡¨ï¼ˆå“¡å·¥è³‡æ–™ï¼‰
- `id` - ä¸»éµ
- `staff_id` - å“¡å·¥ç·¨è™Ÿï¼ˆå”¯ä¸€ï¼‰
- `name` - å§“å
- `email` - é›»å­éƒµä»¶
- `password` - å¯†ç¢¼ï¼ˆåŠ å¯†ï¼‰
- `department` - éƒ¨é–€
- `position` - è·ä½
- `is_admin` - æ˜¯å¦ç‚ºç®¡ç†å“¡
- `created_at` - å‰µå»ºæ™‚é–“
- `updated_at` - æ›´æ–°æ™‚é–“

### è–ªè³‡ç®¡ç†è³‡æ–™è¡¨

#### salary_categories è¡¨ï¼ˆè–ªè³‡é¡åˆ¥ï¼‰
- `id` - ä¸»éµ
- `name` - é¡åˆ¥åç¨±
- `description` - é¡åˆ¥æè¿°
- `color` - é¡¯ç¤ºé¡è‰²
- `is_active` - æ˜¯å¦å•Ÿç”¨
- `created_at` - å‰µå»ºæ™‚é–“

#### salary_records è¡¨ï¼ˆè–ªè³‡è¨˜éŒ„ï¼‰
- `id` - ä¸»éµ
- `staff_id` - å“¡å·¥ç·¨è™Ÿï¼ˆå¤–éµï¼‰
- `category_id` - è–ªè³‡é¡åˆ¥ï¼ˆå¤–éµï¼‰
- `title` - è–ªè³‡é …ç›®æ¨™é¡Œ
- `description` - è©³ç´°èªªæ˜
- `amount` - é‡‘é¡
- `record_date` - è¨˜éŒ„æ—¥æœŸ
- `status` - ç‹€æ…‹ï¼ˆpending/approved/rejected/paidï¼‰
- `approved_at` - æ‰¹å‡†æ™‚é–“
- `paid_at` - æ”¯ä»˜æ™‚é–“
- `created_at` - å‰µå»ºæ™‚é–“

#### salary_monthly_stats è¡¨ï¼ˆæœˆåº¦è–ªè³‡çµ±è¨ˆï¼‰
- `id` - ä¸»éµ
- `staff_id` - å“¡å·¥ç·¨è™Ÿï¼ˆå¤–éµï¼‰
- `year` - å¹´ä»½
- `month` - æœˆä»½
- `total_amount` - ç¸½é‡‘é¡
- `paid_amount` - å·²æ”¯ä»˜é‡‘é¡
- `record_count` - è¨˜éŒ„æ•¸
- `last_updated` - æœ€å¾Œæ›´æ–°æ™‚é–“

### attendance è¡¨ï¼ˆå‡ºå‹¤è¨˜éŒ„ï¼‰
- `id` - ä¸»éµ
- `staff_id` - å“¡å·¥ç·¨è™Ÿï¼ˆå¤–éµï¼‰
- `check_in_time` - ä¸Šç­æ™‚é–“
- `check_out_time` - ä¸‹ç­æ™‚é–“
- `work_date` - å·¥ä½œæ—¥æœŸ
- `total_hours` - ç¸½å·¥ä½œæ™‚æ•¸
- `status` - å‡ºå‹¤ç‹€æ…‹
- `notes` - å‚™è¨»
- `created_at` - å‰µå»ºæ™‚é–“
- `updated_at` - æ›´æ–°æ™‚é–“

## å‡ºå‹¤ç‹€æ…‹èªªæ˜

- `present` - æ­£å¸¸å‡ºå‹¤
- `late` - é²åˆ°ï¼ˆè¶…é 09:00 æ‰“å¡ï¼‰
- `absent` - ç¼ºå¸­ï¼ˆæœªæ‰“å¡ï¼‰
- `early_leave` - æ—©é€€ï¼ˆæœªæ»¿ 8 å°æ™‚ä¸”æ—©æ–¼ 18:00 ä¸‹ç­ï¼‰

## ä½¿ç”¨èªªæ˜

### å“¡å·¥ä½¿ç”¨
1. ä½¿ç”¨å“¡å·¥ç·¨è™Ÿå’Œå¯†ç¢¼ç™»å…¥
2. åœ¨æ§åˆ¶å°é€²è¡Œä¸Šç­æ‰“å¡
3. å·¥ä½œçµæŸå¾Œé€²è¡Œä¸‹ç­æ‰“å¡
4. å¯æŸ¥çœ‹å€‹äººå‡ºå‹¤è¨˜éŒ„å’Œçµ±è¨ˆ

### ç®¡ç†å“¡ä½¿ç”¨
1. ä½¿ç”¨ç®¡ç†å“¡å¸³è™Ÿç™»å…¥
2. åœ¨æ§åˆ¶å°æŸ¥çœ‹æ•´é«”å‡ºå‹¤ç‹€æ³
3. åœ¨å‡ºå‹¤å ±è¡¨ä¸­æŸ¥çœ‹è©³ç´°è¨˜éŒ„
4. åœ¨å“¡å·¥ç®¡ç†ä¸­æ–°å¢/ç·¨è¼¯å“¡å·¥
5. å¯å°å‡º CSV å ±è¡¨é€²è¡Œåˆ†æ

## å®‰å…¨ç‰¹æ€§

- å¯†ç¢¼ä½¿ç”¨ PHP `password_hash()` åŠ å¯†
- ä½¿ç”¨ PDO é è™•ç†èªå¥é˜²æ­¢ SQL æ³¨å…¥
- Session ç®¡ç†å’Œæ¬Šé™æ§åˆ¶
- è¼¸å…¥é©—è­‰å’Œ HTML è½‰ç¾©
- CSRF ä¿è­·ï¼ˆè¡¨å–®æäº¤é©—è­‰ï¼‰

## è‡ªè¨‚è¨­å®š

### å·¥ä½œæ™‚é–“è¨­å®š
åœ¨ `includes/functions.php` ä¸­å¯ä»¥ä¿®æ”¹ï¼š
- æ¨™æº–ä¸Šç­æ™‚é–“ï¼šé è¨­ 09:00
- æ¨™æº–ä¸‹ç­æ™‚é–“ï¼šé è¨­ 18:00
- æ¨™æº–å·¥ä½œæ™‚æ•¸ï¼šé è¨­ 8 å°æ™‚

### æ¨£å¼è‡ªè¨‚
ä¸»è¦æ¨£å¼æª”æ¡ˆä½æ–¼ `assets/css/style.css`ï¼Œæ¡ç”¨ CSS è®Šæ•¸è¨­è¨ˆï¼Œä¾¿æ–¼ä¿®æ”¹é…è‰²ã€‚

## æŠ€è¡“æ”¯æ´

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. PHP ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆéœ€æ±‚
2. MySQL æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œ
3. è³‡æ–™åº«é€£æ¥è¨­å®šæ˜¯å¦æ­£ç¢º
4. æª”æ¡ˆæ¬Šé™æ˜¯å¦æ­£ç¢ºè¨­ç½®

## æˆæ¬Šèªªæ˜

æ­¤å°ˆæ¡ˆåƒ…ä¾›å­¸ç¿’å’Œå…§éƒ¨ä½¿ç”¨ï¼Œè«‹å‹¿ç”¨æ–¼å•†æ¥­ç”¨é€”ã€‚

## æ›´æ–°æ—¥èªŒ

### v1.0.0 (2025-01-22)
- åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- å®Œæ•´çš„æ‰“å¡åŠŸèƒ½
- ç®¡ç†å“¡å¾Œå°
- å ±è¡¨å°å‡ºåŠŸèƒ½
- éŸ¿æ‡‰å¼è¨­è¨ˆ
